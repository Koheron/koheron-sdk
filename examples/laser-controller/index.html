<!DOCTYPE html>
<html lang="en">

<head>
  <title>Koheron</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Koheron">
  <meta charset="utf-8">

  <!--http://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers-->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <link rel="shortcut icon" href="kbird.ico">
  <link rel="stylesheet" type="text/css" href="bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="_koheron.css">

  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="bootstrap.min.js"></script>
</head>

<body>

<div class="container-fluid" style="padding: 10px; height: 75px">
  <a href="/">
    <img alt="Koheron" src="_koheron_logo.svg" style="height: 100%">
  </a>
</div>

<div class="container">

  <h1>Laser Controller</h1>

  <br>
  <br>

    <!--LASER-->

    <div class="border padding">
      <a id="laser-switch" class="btn btn-success" onclick="app.laserControl.switchLaser(); return false">Start Laser</a>
      <a id="mode-switch" class="btn btn-info" onclick="app.laserControl.switchMode(); return false">Constant current</a>
      <br><br>

      <div id="current-control">
        Current (mA): <span id="input-current" style="width:50px; text-align:right; display:inline-block"></span>
        <input id="input-current-slider" type="range" onchange="app.laserControl.setCurrent(this.value); return false;" oninput="app.laserControl.setCurrent(this.value); return false;" value="0" min="0" step="0.01" max="40" >
      </div>

      <div id="power-control">
        Power (µW): <span id="input-power" style="width:60px; text-align:right; display:inline-block"></span>
        <input id="input-power-slider" type="range" onchange="app.laserControl.setPower(this.value); return false;" oninput="app.laserControl.setPower(this.value); return false;" value="0" min="0" step="0.1" max="4000" >
      </div>

      Measured Power (µW): &nbsp;<span id="output-power" style="width:60px; text-align:right; display:inline-block"></span> &nbsp;
      <canvas id="canvas" width="400" height="15"></canvas>

      <br>
      <span id="calibration"></span> &nbsp;(<a id="start-calibration" class="btn-link blue" onclick="app.laserControl.startCalibration(); return false">start calibration</a>)
      <div id="calibration-instructions" class="padding" style="display:none">
        <ol>
          <li>
            Connect your laser to an external power meter
          </li>
          <li>
            Tune the current/power until the power reads 1 mW on the power meter.
          </li>
          <li><a id="calibration-done" class="btn btn-primary" onclick="app.laserControl.calibrationDone(); return false">Done</a></li>
        </ol>
      </div>
    </div>

  <br>
  <br>

  <p>
    See <a href="/koheron/">available instruments</a>.
    <br><br>
    This instrument was built with <a href="https://www.koheron.com/software-development-kit">Koheron Software Development Kit</a>.<br>
    See instrument <a href="https://github.com/Koheron/koheron-sdk/tree/master/examples/laser-controller">source code</a>.<br>
  </p>

</div>

<script src="app.js?random=<?php echo uniqid(); ?>"></script>

</body>
</html>
